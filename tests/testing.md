**手动回归测试清单**

这份清单是你每次修改代码后都需要**手动操作一遍**的流程，以确保所有功能都和预期一样。请像飞行员起飞前检查仪表一样，严格地逐项执行。

#### **✅ `T01` - 应用程序启动与基础UI**

*   [ ] **`1.1`** 应用程序能正常启动，没有弹出错误。
*   [ ] **`1.2`** 主窗口布局正确：左侧边栏、中央聊天区、右侧边栏。
*   [ ] **`1.3`** 默认配置（Config 0）的参数（模型、系统指令等）已正确加载到右侧边栏的UI控件中。
*   [ ] **`1.4`** 两个聊天窗口（Gemini 1, Gemini 2）及其Raw Log标签页均已显示。

#### **✅ `T02` - 侧边栏功能**

*   [ ] **`2.1`** **左侧边栏:** 点击 `◀` 按钮，侧边栏能正常折叠。再次点击 `▶` 按钮，能正常展开。
*   [ ] **`2.2`** **右侧边栏:** 点击 `▶` 按钮，侧边栏能正常展开。再次点击 `◀` 按钮，能正常折叠。
*   [ ] **`2.3`** **折叠面板:** 点击左侧“Session Management”和“Display”标题，以及右侧“Gemini X Settings”标题，内容能正常展开和收起。

#### **✅ `T03` - 核心聊天功能**

*   [ ] **`3.1`** **发送消息:** 在Gemini 1输入框中输入 "Hello"，点击 "Send"。
    *   [ ] 输入框内容被清空。
    *   [ ] 你的消息 "Hello" 立即显示在聊天窗口中。
    *   [ ] Send按钮变灰，Stop按钮激活，进度条出现并转动。
    *   [ ] Gemini 1 能正常回复消息。
    *   [ ] 回复完成后，UI恢复正常（Send激活，Stop变灰，进度条消失）。
*   [ ] **`3.2`** **停止生成:** 发送一个需要长时间回复的问题（例如“写一个500字的故事”），在生成过程中点击 "Stop"。
    *   [ ] AI回复立即停止。
    *   [ ] 聊天窗口中出现“Generation stopped by user”之类的系统提示。
    *   [ ] UI恢复正常。
*   [ ] **`3.3`** **多文件上传:**
    *   [ ] 在Gemini 1设置中，点击 `+` 按钮，选择2个或以上的文件（例如 .txt, .py）。
    *   [ ] 文件名显示在文件列表中。
    *   [ ] 选中一个文件，点击 `-`，该文件被移除。
    *   [ ] 点击 `x`，所有文件被移除。
    *   [ ] 上传一个文件后发送消息（例如“总结这个文件”），AI能基于文件内容进行回复，之后文件列表自动清空。
*   [ ] **`3.4`** **Raw Log:** 检查Gemini 1 (Raw) 标签页，确认刚才的对话（包括你的提问、AI的回复、文件上传提示、停止生成提示）都已按格式记录。
*   [ ] **`3.5`** **Token计数:** 确认每次对话后，Token计数器 (`Tokens: X | Y`) 的值会更新。

#### **✅ `T04` - 会话管理 (Session Management)**

*   [ ] **`4.1`** **保存会话:** 与Gemini 1进行几轮对话后，点击 "Save Gemini 1"，保存为一个 `.json` 文件。
*   [ ] **`4.2`** **新会话:** 点击 "New Session"，确认两个聊天窗口都被清空，并显示会话重置的系统提示。
*   [ ] **`4.3`** **加载会话:** 点击 "Load Gemini 1"，选择刚才保存的 `.json` 文件。确认之前的聊天记录被完整地加载回来。
*   [ ] **`4.4`** **导出对话:** 点击 "Export Gemini 1"，分别导出为 `.html` 和 `.md` 文件。
    *   [ ] 打开 `.html` 文件，确认格式、颜色和内容都正确。
    *   [ ] 打开 `.md` 文件，确认内容和格式正确。

#### **✅ `T05` - 配置管理 (Configuration Management)**

*   [ ] **`5.1`** **切换配置:** 在右侧边栏的下拉菜单中选择 "Config 1"。
    *   [ ] 弹出确认框 "applying a new configuration will reset..."。
    *   [ ] 点击 "Yes"，两个聊天会话被重置。
    *   [ ] 确认右侧边栏的参数（模型、系统指令等）已更新为Config 1的设置。
*   [ ] **`5.2`** **修改并保存配置:**
    *   [ ] 修改 "Description"、Gemini 1的系统指令和温度滑块。
    *   [ ] 点击 "Save to Active Config"。
    *   [ ] 弹出确认框 "Settings saved. Do you want to apply...?"。
    *   [ ] 点击 "Yes"，会话重置，新配置生效。
    *   [ ] 重启应用，确认刚才保存的配置（包括Description）被持久化并正确加载。
*   [ ] **`5.3`** **API Key设置:** 点击 "Set API Key"，输入一个（有效的或无效的）Key，确认程序有正确的成功或失败提示。

#### **✅ `T06` - 显示设置 (Display Settings)**

*   [ ] **`6.1`** **字体大小:**
    *   [ ] 调整 "Name Font Size" 微调框，确认聊天记录中角色名称（"You", "Gemini X"）的大小实时变化。
    *   [ ] 调整 "Chat Font Size" 微调框，确认聊天消息内容的大小实时变化。
*   [ ] **`6.2`** **颜色选择:**
    *   [ ] 点击 "User Name" 旁边的颜色按钮，选择一个新颜色（例如亮红色）。
    *   [ ] 确认聊天记录中 "You" 的颜色立即更新。
    *   [ ] 对其他三个颜色按钮（User Message, Gemini Name, Gemini Message）重复此操作，并验证效果。
*   [ ] **`6.3`** **恢复默认:** 点击 "Restore Defaults"，确认所有字体和颜色设置恢复到初始状态。
*   [ ] **`6.4`** **持久化:** 修改显示设置后，重启应用，确认新设置被保存和加载。

#### **✅ `T07` - 自动回复 (Auto-Reply)**

*   [ ] **`7.1`** **启用自动回复:** 勾选Gemini 1下方的 "Auto-reply to Gemini 2"。
*   [ ] **`7.2`** **设置延迟:** 在右侧边栏将 "Auto-Reply Delay" 设置为 `0.1` (6秒)。
*   [ ] **`7.3`** **触发:** 向Gemini 1发送消息。
    *   [ ] Gemini 1回复后，Gemini 2 聊天窗口出现 "Auto-replying in..." 的系统提示和倒计时。
    *   [ ] 倒计时结束后，Gemini 1的回复被作为新消息自动发送给Gemini 2。
    *   [ ] Gemini 2 开始生成回复。
*   [ ] **`7.4`** **禁用:** 取消勾选，重复步骤 `7.3`，确认自动回复不再触发。

---

**使用建议:**
*   将这份手动测试清单保存为一个 `TESTING.md` 文件放在你的项目根目录。
*   每次你完成一个大的修改（比如完成了回调的重构），就完整地过一遍这个清单。
*   如果发现了Bug，先为这个Bug写一个（如果可能的话）失败的自动化测试用例，或者在手动清单中添加一个更具体的检查项，然后再修复它。这能确保同一个Bug不会再次出现。

这份组合方案可以在没有复杂UI测试框架的情况下，最大限度地保证你的应用质量。